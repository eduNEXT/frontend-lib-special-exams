{"version":3,"file":"proctorio.js","names":["_frontendPlatform","require","checkAppStatus","Promise","resolve","reject","handleResponse","event","origin","getConfig","EXAMS_BASE_URL","window","removeEventListener","data","active","addEventListener","top","postMessage","notifyStartExam"],"sources":["../../../src/data/messages/proctorio.js"],"sourcesContent":["/**\n * Custom integration with Proctorio browser extension\n *\n * Note: this is a temporary solution, we would like to avoid\n * vendor-specific integrations long term. As of now these events\n * will trigger on ANY lti integration, not just Proctorio.\n */\nimport { getConfig } from '@edx/frontend-platform';\n\nexport async function checkAppStatus() {\n  return new Promise((resolve, reject) => {\n    const handleResponse = event => {\n      if (event.origin === getConfig().EXAMS_BASE_URL) {\n        window.removeEventListener('message', handleResponse);\n        if (event?.data?.active) {\n          resolve();\n        }\n        reject();\n      }\n    };\n    window.addEventListener('message', handleResponse);\n    window.top.postMessage(['proctorio_status'], '*');\n  });\n}\n\nexport function notifyStartExam() {\n  window.top.postMessage(\n    ['exam_state_change', 'exam_take'],\n    '*', // this isn't emitting secure data so any origin is fine\n  );\n}\n"],"mappings":";;;;;;;AAOA,IAAAA,iBAAA,GAAAC,OAAA;AAPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGO,eAAeC,cAAcA,CAAA,EAAG;EACrC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,cAAc,GAAGC,KAAK,IAAI;MAC9B,IAAIA,KAAK,CAACC,MAAM,KAAK,IAAAC,2BAAS,EAAC,CAAC,CAACC,cAAc,EAAE;QAC/CC,MAAM,CAACC,mBAAmB,CAAC,SAAS,EAAEN,cAAc,CAAC;QACrD,IAAIC,KAAK,EAAEM,IAAI,EAAEC,MAAM,EAAE;UACvBV,OAAO,CAAC,CAAC;QACX;QACAC,MAAM,CAAC,CAAC;MACV;IACF,CAAC;IACDM,MAAM,CAACI,gBAAgB,CAAC,SAAS,EAAET,cAAc,CAAC;IAClDK,MAAM,CAACK,GAAG,CAACC,WAAW,CAAC,CAAC,kBAAkB,CAAC,EAAE,GAAG,CAAC;EACnD,CAAC,CAAC;AACJ;AAEO,SAASC,eAAeA,CAAA,EAAG;EAChCP,MAAM,CAACK,GAAG,CAACC,WAAW,CACpB,CAAC,mBAAmB,EAAE,WAAW,CAAC,EAClC,GAAG,CAAE;EACP,CAAC;AACH"}